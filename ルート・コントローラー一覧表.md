# ルート・コントローラー一覧表

## 基本情報
- 作成日: 2025年9月20日
- アプリケーション: CoachTech フリマアプリ

## ルート一覧

| 画面名称 | パス | メソッド | ルート先コントローラー | アクション | 認証必須 | 説明 |
|---------|------|----------|---------------------|-----------|----------|------|
| 商品一覧画面(トップ画面) | `/` | GET | ProductController | index | 不要 | 商品一覧ページ |
| 商品一覧画面(トップ画面)_マイリスト | `/?tab=mylist` | GET | ProductController | index | 必須 | マイリスト表示 |
| 会員登録画面 | `/register` | GET | Laravel\Fortify\RegisteredUser | create | 不要 | 新規会員登録 |
| ログイン画面 | `/login` | GET | Auth\LoginController | showLoginForm | 不要 | ログイン画面 |
| 商品詳細画面 | `/item/{product}` | GET | ProductController | show | 不要 | 商品詳細表示 |
| 商品購入画面 | `/purchase/{product}` | GET | PurchaseController | create | 必須 | 商品購入手続き |
| 住所変更ページ | `/purchase/address/{product}` | GET | PurchaseController | editAddress | 必須 | 配送先住所変更 |
| 商品出品画面 | `/sell` | GET | ProductController | create | 必須 | 商品出品フォーム |
| プロフィール画面 | `/mypage` | GET | ProfileController | show | 必須 | プロフィール表示 |
| プロフィール編集画面 | `/mypage/profile` | GET | ProfileController | edit | 必須 | プロフィール編集 |
| プロフィール画面_購入した商品一覧 | `/mypage?page=buy` | GET | ProfileController | show | 必須 | 購入商品一覧表示 |
| プロフィール画面_出品した商品一覧 | `/mypage?page=sell` | GET | ProfileController | show | 必須 | 出品商品一覧表示 |

## 追加ルート（実装で追加されたもの）

| 画面名称 | パス | メソッド | ルート先コントローラー | アクション | 認証必須 | 説明 |
|---------|------|----------|---------------------|-----------|----------|------|
| 商品登録処理 | `/products` | POST | ProductController | store | 必須 | 商品登録処理 |
| 商品編集画面 | `/products/{product}/edit` | GET | ProductController | edit | 必須 | 商品編集フォーム |
| 商品更新処理 | `/products/{product}` | PUT | ProductController | update | 必須 | 商品更新処理 |
| 商品削除処理 | `/products/{product}` | DELETE | ProductController | destroy | 必須 | 商品削除処理 |
| プロフィール更新処理 | `/profile` | PUT | ProfileController | update | 必須 | プロフィール更新処理 |
| コメント投稿処理 | `/comments` | POST | CommentController | store | 必須 | コメント投稿処理 |
| 購入処理 | `/purchase/{product}` | POST | PurchaseController | store | 必須 | 購入処理 |
| 住所更新処理 | `/purchase/address/{product}` | PUT | PurchaseController | updateAddress | 必須 | 住所更新処理 |
| いいね追加処理 | `/favorites/{product}` | POST | FavoriteController | store | 必須 | いいね追加処理 |
| いいね削除処理 | `/favorites/{product}` | DELETE | FavoriteController | destroy | 必須 | いいね削除処理 |
| メール認証通知画面 | `/email/verify` | GET | - | - | 必須 | メール認証通知画面 |
| メール認証処理 | `/email/verify/{id}/{hash}` | GET | - | - | 必須 | メール認証処理 |
| メール認証再送信 | `/email/verification-notification` | POST | - | - | 必須 | メール認証再送信 |
| ダッシュボード | `/dashboard` | GET | DashboardController | index | 必須 | ダッシュボード |
| プロフィール設定画面 | `/profile/setup` | GET | ProfileSetupController | show | 必須 | プロフィール設定画面 |
| プロフィール設定処理 | `/profile/setup` | POST | ProfileSetupController | store | 必須 | プロフィール設定処理 |

## 認証ルート

| 画面名称 | パス | メソッド | ルート先コントローラー | アクション | 認証必須 | 説明 |
|---------|------|----------|---------------------|-----------|----------|------|
| ログイン処理 | `/login` | POST | Auth\LoginController | login | 不要 | ログイン処理 |
| ログアウト処理 | `/logout` | POST | Auth\LoginController | logout | 必須 | ログアウト処理 |

## ミドルウェア情報

### 使用されているミドルウェア
- `auth`: 認証が必要
- `verified`: メール認証が必要
- `check.first.login`: 初回ログインチェック
- `signed`: 署名付きURL
- `throttle:6,1`: レート制限（6回/1分）

### ミドルウェア適用パターン
- 認証不要: 商品一覧、商品詳細、ログイン、会員登録
- 認証必須: 商品出品、プロフィール、購入、いいね
- 認証+メール認証必須: ほとんどの認証後の画面
- 初回ログインチェック: 認証後の主要画面

## 注意事項
- 設計書の `{item_id}` パラメータは実装では `{product}` として実装されている
- メール認証機能が追加されており、多くの画面で `verified` ミドルウェアが適用されている
- 初回ログイン時のプロフィール設定機能が追加されている
